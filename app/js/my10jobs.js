'use strict';

document.addEventListener('DOMContentLoaded', function () {

    $('.js-lightbox-video').lightbox({
        'trigger': '.js-lightbox-video-trigger',
        'showContent': function showContent(e) {
            e.preventDefault();
            // http://jsfiddle.net/KtbYR/5/
            // http://stackoverflow.com/questions/8948403/youtube-api-target-multiple-existing-iframes?noredirect=1&lq=1
            var frame = this.container.find('iframe').attr('src', 'https://www.youtube.com/embed/' + $(e.currentTarget).attr('href').replace('#', '') + '?rel=0&autoplay=1&wmode=opaque&fs=1&enablejsapi=1');
        },
        'onClose': function onClose() {
            setTimeout(function () {
                this.container.find('iframe').attr('src', '');
            }.bind(this), 400);
        }
    });
}, false);

var Lightbox = function Lightbox(node, settings) {
    this.settings = $.extend({}, this.defaultSettings, settings);
    this.container = node;
    this.content = this.container.find(this.settings.content);
    this.trigger = $(this.settings.trigger);
    this.closeBtn = this.container.find(this.settings.closeBtn);

    this.triggers = [];

    this.trigger.each(function (index, el) {
        el = $(el);
        this.triggers.push(new LightboxTrigger(index, el, this));
    }.bind(this));

    this.keyup = this.keyup.bind(this);

    this.closeBtn.on('click', this.close.bind(this));
};

Lightbox.prototype.defaultSettings = {
    'trigger': '.js-lightbox-trigger',
    'closeBtn': '.js-lightbox-close',
    'content': '.lightbox-content',
    'activeClass': 'lightbox-active',
    'showContent': function showContent() {},
    'onOpen': function onOpen() {},
    'onClose': function onClose() {}
};

Lightbox.prototype.open = function () {
    this.container.addClass(this.settings.activeClass);
    this.settings.onOpen.apply(this, arguments);
    $(document).on('keyup', this.keyup);
};

Lightbox.prototype.close = function (e) {
    if (e) e.preventDefault();
    this.container.removeClass(this.settings.activeClass);
    this.settings.onClose.apply(this, arguments);
    $(document).off('keyup', this.keyup);
};

Lightbox.prototype.keyup = function (e) {
    if (e.keyCode == 27) {
        this.close();
    }
};

Lightbox.prototype.loadContent = function (url) {
    $.ajax({
        'url': url,
        'method': 'POST',
        'success': function () {
            this.settings.showContent.apply(this, arguments);
        }.bind(this),
        'error': function error(message) {
            console.error(message);
        }
    });
};

var LightboxTrigger = function LightboxTrigger(index, trigger, lightbox) {
    this.index = index;
    this.trigger = trigger;
    this.url = trigger.attr('href') || trigger.attr('data-href');
    this.lightbox = lightbox;

    this.trigger.on('click', this.click.bind(this));
};

LightboxTrigger.prototype.click = function (e) {
    e.preventDefault();
    this.lightbox.open();
    this.lightbox.settings.showContent.apply(this.lightbox, arguments);
};

$.fn.lightbox = function (settings) {
    return $(this).each(function (index, el) {
        el = $(el);
        if (!el.data('lightbox')) {
            el.data('lightbox', new Lightbox(el, settings));
        }
    });
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm15MTBqb2JzLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIiQiLCJsaWdodGJveCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImZyYW1lIiwiY29udGFpbmVyIiwiZmluZCIsImF0dHIiLCJjdXJyZW50VGFyZ2V0IiwicmVwbGFjZSIsInNldFRpbWVvdXQiLCJiaW5kIiwiTGlnaHRib3giLCJub2RlIiwic2V0dGluZ3MiLCJleHRlbmQiLCJkZWZhdWx0U2V0dGluZ3MiLCJjb250ZW50IiwidHJpZ2dlciIsImNsb3NlQnRuIiwidHJpZ2dlcnMiLCJlYWNoIiwiaW5kZXgiLCJlbCIsInB1c2giLCJMaWdodGJveFRyaWdnZXIiLCJrZXl1cCIsIm9uIiwiY2xvc2UiLCJwcm90b3R5cGUiLCJvcGVuIiwiYWRkQ2xhc3MiLCJhY3RpdmVDbGFzcyIsIm9uT3BlbiIsImFwcGx5IiwiYXJndW1lbnRzIiwicmVtb3ZlQ2xhc3MiLCJvbkNsb3NlIiwib2ZmIiwia2V5Q29kZSIsImxvYWRDb250ZW50IiwidXJsIiwiYWpheCIsInNob3dDb250ZW50IiwibWVzc2FnZSIsImNvbnNvbGUiLCJlcnJvciIsImNsaWNrIiwiZm4iLCJkYXRhIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxTQUFTQyxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOEMsWUFBVTs7QUFFakRDLE1BQUUsb0JBQUYsRUFBd0JDLFFBQXhCLENBQWlDO0FBQ2hDLG1CQUFXLDRCQURxQjtBQUVoQyx1QkFBZSxxQkFBU0MsQ0FBVCxFQUFZO0FBQ3ZCQSxjQUFFQyxjQUFGO0FBQ0E7QUFDQTtBQUNBLGdCQUFJQyxRQUFRLEtBQUtDLFNBQUwsQ0FBZUMsSUFBZixDQUFvQixRQUFwQixFQUE4QkMsSUFBOUIsQ0FBbUMsS0FBbkMsRUFBMEMsbUNBQWlDUCxFQUFFRSxFQUFFTSxhQUFKLEVBQW1CRCxJQUFuQixDQUF3QixNQUF4QixFQUFnQ0UsT0FBaEMsQ0FBd0MsR0FBeEMsRUFBNkMsRUFBN0Ms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LEtBQUtqQyxRQUE5QyxFQUF3RGtDLFNBQXhEO0FBQ0gsQ0FKRDs7QUFNQW5DLEVBQUVnRCxFQUFGLENBQUsvQyxRQUFMLEdBQWdCLFVBQVNhLFFBQVQsRUFBbUI7QUFDL0IsV0FBT2QsRUFBRSxJQUFGLEVBQVFxQixJQUFSLENBQWEsVUFBU0MsS0FBVCxFQUFnQkMsRUFBaEIsRUFBb0I7QUFDcENBLGFBQUt2QixFQUFFdUIsRUFBRixDQUFMO0FBQ0EsWUFBSSxDQUFDQSxHQUFHMEIsSUFBSCxDQUFRLFVBQVIsQ0FBTCxFQUEwQjtBQUN0QjFCLGVBQUcwQixJQUFILENBQVEsVUFBUixFQUFvQixJQUFJckMsUUFBSixDQUFhVyxFQUFiLEVBQWlCVCxRQUFqQixDQUFwQjtBQUNIO0FBQ0osS0FMTSxDQUFQO0FBTUgsQ0FQRCIsImZpbGUiOiJteTEwam9icy5qcyIsInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpe1xuXG4gICAgICAgJCgnLmpzLWxpZ2h0Ym94LXZpZGVvJykubGlnaHRib3goe1xuICAgICAgICAndHJpZ2dlcic6ICcuanMtbGlnaHRib3gtdmlkZW8tdHJpZ2dlcicsXG4gICAgICAgICdzaG93Q29udGVudCc6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9qc2ZpZGRsZS5uZXQvS3RiWVIvNS9cbiAgICAgICAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODk0ODQwMy95b3V0dWJlLWFwaS10YXJnZXQtbXVsdGlwbGUtZXhpc3RpbmctaWZyYW1lcz9ub3JlZGlyZWN0PTEmbHE9MVxuICAgICAgICAgICAgdmFyIGZyYW1lID0gdGhpcy5jb250YWluZXIuZmluZCgnaWZyYW1lJykuYXR0cignc3JjJywgJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLycrJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2hyZWYnKS5yZXBsYWNlKCcjJywgJycpKyc/cmVsPTAmYXV0b3BsYXk9MSZ3bW9kZT1vcGFxdWUmZnM9MSZlbmFibGVqc2FwaT0xJyk7XG5cbiAgICAgICAgfSxcbiAgICAgICAgJ29uQ2xvc2UnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnaWZyYW1lJykuYXR0cignc3JjJywgJycpO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCA0MDApO1xuICAgICAgICB9XG4gICAgfSk7XG59LCBmYWxzZSk7XG5cblxudmFyIExpZ2h0Ym94ID0gZnVuY3Rpb24obm9kZSwgc2V0dGluZ3MpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gJC5leHRlbmQoe30sIHRoaXMuZGVmYXVsdFNldHRpbmdzLCBzZXR0aW5ncyk7XG4gICAgdGhpcy5jb250YWluZXIgPSBub2RlO1xuICAgIHRoaXMuY29udGVudCA9IHRoaXMuY29udGFpbmVyLmZpbmQodGhpcy5zZXR0aW5ncy5jb250ZW50KTtcbiAgICB0aGlzLnRyaWdnZXIgPSAkKHRoaXMuc2V0dGluZ3MudHJpZ2dlcik7XG4gICAgdGhpcy5jbG9zZUJ0biA9IHRoaXMuY29udGFpbmVyLmZpbmQodGhpcy5zZXR0aW5ncy5jbG9zZUJ0bik7XG5cbiAgICB0aGlzLnRyaWdnZXJzID0gW107XG5cbiAgICB0aGlzLnRyaWdnZXIuZWFjaChmdW5jdGlvbihpbmRleCwgZWwpIHtcbiAgICAgICAgZWwgPSAkKGVsKTtcbiAgICAgICAgdGhpcy50cmlnZ2Vycy5wdXNoKG5ldyBMaWdodGJveFRyaWdnZXIoaW5kZXgsIGVsLCB0aGlzKSk7XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIHRoaXMua2V5dXAgPSB0aGlzLmtleXVwLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmNsb3NlQnRuLm9uKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG59XG5cbkxpZ2h0Ym94LnByb3RvdHlwZS5kZWZhdWx0U2V0dGluZ3MgPSB7XG4gICAgJ3RyaWdnZXInOiAnLmpzLWxpZ2h0Ym94LXRyaWdnZXInLFxuICAgICdjbG9zZUJ0bic6ICcuanMtbGlnaHRib3gtY2xvc2UnLFxuICAgICdjb250ZW50JzogJy5saWdodGJveC1jb250ZW50JyxcbiAgICAnYWN0aXZlQ2xhc3MnOiAnbGlnaHRib3gtYWN0aXZlJyxcbiAgICAnc2hvd0NvbnRlbnQnOiBmdW5jdGlvbigpIHt9LFxuICAgICdvbk9wZW4nOiBmdW5jdGlvbigpIHt9LFxuICAgICdvbkNsb3NlJzogZnVuY3Rpb24oKSB7fVxufVxuXG5MaWdodGJveC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmFkZENsYXNzKHRoaXMuc2V0dGluZ3MuYWN0aXZlQ2xhc3MpO1xuICAgIHRoaXMuc2V0dGluZ3Mub25PcGVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgJChkb2N1bWVudCkub24oJ2tleXVwJywgdGhpcy5rZXl1cCk7XG59XG5cbkxpZ2h0Ym94LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZSkgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKHRoaXMuc2V0dGluZ3MuYWN0aXZlQ2xhc3MpO1xuICAgIHRoaXMuc2V0dGluZ3Mub25DbG9zZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICQoZG9jdW1lbnQpLm9mZigna2V5dXAnLCB0aGlzLmtleXVwKTtcbn1cblxuTGlnaHRib3gucHJvdG90eXBlLmtleXVwID0gZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT0gMjcpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbn1cblxuTGlnaHRib3gucHJvdG90eXBlLmxvYWRDb250ZW50ID0gZnVuY3Rpb24odXJsKSB7XG4gICAgJC5hamF4KHtcbiAgICAgICAgJ3VybCc6IHVybCxcbiAgICAgICAgJ21ldGhvZCc6ICdQT1NUJyxcbiAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc2hvd0NvbnRlbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgICB9LmJpbmQodGhpcyksXG4gICAgICAgICdlcnJvcic6IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSlcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG52YXIgTGlnaHRib3hUcmlnZ2VyID0gZnVuY3Rpb24oaW5kZXgsIHRyaWdnZXIsIGxpZ2h0Ym94KSB7XG4gICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgIHRoaXMudHJpZ2dlciA9IHRyaWdnZXI7XG4gICAgdGhpcy51cmwgPSB0cmlnZ2VyLmF0dHIoJ2hyZWYnKSB8fCB0cmlnZ2VyLmF0dHIoJ2RhdGEtaHJlZicpO1xuICAgIHRoaXMubGlnaHRib3ggPSBsaWdodGJveDtcblxuICAgIHRoaXMudHJpZ2dlci5vbignY2xpY2snLCB0aGlzLmNsaWNrLmJpbmQodGhpcykpO1xufVxuXG5MaWdodGJveFRyaWdnZXIucHJvdG90eXBlLmNsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLmxpZ2h0Ym94Lm9wZW4oKTtcbiAgICB0aGlzLmxpZ2h0Ym94LnNldHRpbmdzLnNob3dDb250ZW50LmFwcGx5KHRoaXMubGlnaHRib3gsIGFyZ3VtZW50cyk7XG59XG5cbiQuZm4ubGlnaHRib3ggPSBmdW5jdGlvbihzZXR0aW5ncykge1xuICAgIHJldHVybiAkKHRoaXMpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsKSB7XG4gICAgICAgIGVsID0gJChlbCk7XG4gICAgICAgIGlmICghZWwuZGF0YSgnbGlnaHRib3gnKSkge1xuICAgICAgICAgICAgZWwuZGF0YSgnbGlnaHRib3gnLCBuZXcgTGlnaHRib3goZWwsIHNldHRpbmdzKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG4iXX0=
